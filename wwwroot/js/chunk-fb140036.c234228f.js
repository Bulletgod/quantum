(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb140036"],{"0f37":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("66df"),o=function(){return n["a"].request({url:"/api/Enum",method:"get"})}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),o=a("0bfb"),i=a("9e1e"),l="toString",d=/./[l],r=function(t){a("2aba")(RegExp.prototype,l,t,!0)};a("79e5")((function(){return"/a/b"!=d.call({source:"a",flags:"b"})}))?r((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)})):d.name!=l&&r((function(){return d.call(this)}))},"767f":function(t,e,a){"use strict";a("9cdd")},"9cdd":function(t,e,a){},d085:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Form",{attrs:{"label-width":80},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.LoadCommand(1))}}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"搜索"}},[a("Input",{attrs:{placeholder:"输入搜索关键字"},model:{value:t.QueryForm.Key,callback:function(e){t.$set(t.QueryForm,"Key",e)},expression:"QueryForm.Key"}})],1)],1),t._v("\n         \n        "),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.LoadCommand(1)}}},[a("Icon",{attrs:{type:"md-search"}}),t._v(" 搜索\n        ")],1)],1)],1)],1),a("div",{staticStyle:{margin:"20px 0"}},[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editCommand(-1)}}},[a("Icon",{attrs:{type:"md-add"}}),t._v(" 添加\n    ")],1),t._v("\n     \n    "),a("Button",{attrs:{type:"error",size:"small"},on:{click:t.deleteSelection}},[a("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除\n    ")],1)],1),a("Table",{ref:"EnvTable",attrs:{stripe:"",border:"",columns:t.CommandColumns,data:t.CommadnData}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.PageInfo.Total,current:t.QueryForm.PageIndex,"page-size":t.QueryForm.PageSize,"page-size-opts":t.PageInfo.PageSizeOpts},on:{"on-change":t.LoadCommand}})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:t.EditCommandModal.Title,width:600},model:{value:t.EditCommandModal.Show,callback:function(e){t.$set(t.EditCommandModal,"Show",e)},expression:"EditCommandModal.Show"}},[a("Form",{ref:"editCommandForm",attrs:{model:t.EditCommandModal.Data,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"指令",prop:"Key"}},[a("Input",{attrs:{placeholder:"输入快捷回复指令"},model:{value:t.EditCommandModal.Data.Key,callback:function(e){t.$set(t.EditCommandModal.Data,"Key",e)},expression:"EditCommandModal.Data.Key"}},[a("Checkbox",{attrs:{slot:"append"},slot:"append",model:{value:t.EditCommandModal.Data.EnableRegex,callback:function(e){t.$set(t.EditCommandModal.Data,"EnableRegex",e)},expression:"EditCommandModal.Data.EnableRegex"}},[t._v("正则")])],1)],1),a("FormItem",{attrs:{label:"回复内容",prop:"Message"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.EditCommandModal.Data.Message,callback:function(e){t.$set(t.EditCommandModal.Data,"Message",e)},expression:"EditCommandModal.Data.Message"}})],1),a("FormItem",{attrs:{label:"通信类型",prop:"CommunicationType"}},[a("Select",{attrs:{clearable:"",placeholder:"指定通讯类型，如选择QQ，则只有QQ用户发送指令才回复"},on:{"on-change":t.EnvTypeChange},model:{value:t.EditCommandModal.Data.CommunicationType,callback:function(e){t.$set(t.EditCommandModal.Data,"CommunicationType",e)},expression:"EditCommandModal.Data.CommunicationType"}},t._l(t.AllEnums.CommunicationType,(function(e){return a("Option",{key:e.Value,attrs:{value:e.Value}},[t._v("\n            "+t._s(e.Key)+"\n          ")])})),1)],1),a("FormItem",{attrs:{label:"是否启用"}},[a("Checkbox",{model:{value:t.EditCommandModal.Data.Enable,callback:function(e){t.$set(t.EditCommandModal.Data,"Enable",e)},expression:"EditCommandModal.Data.Enable"}},[t._v("启用")])],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.EditCommandModal.Data.Remark,callback:function(e){t.$set(t.EditCommandModal.Data,"Remark",e)},expression:"EditCommandModal.Data.Remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleCancel()}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("editCommandForm")}}},[t._v("提交")])],1)],1)],1)},o=[],i=(a("6b54"),a("7f7f"),a("66df")),l=function(t){return i["a"].request({url:"/api/Command",params:t,method:"get"})},d=function(t){return i["a"].request({url:"/api/Command",data:t,method:"post"})},r=function(t){return i["a"].request({url:"/api/Command",data:t,method:"delete"})},s=a("c276"),m=a("0f37"),c={data:function(){var t=this;return{CommandColumns:[{type:"selection",width:60,align:"center"},{title:"指令",key:"Key",width:120},{title:"通讯类型",key:"CommunicationType",width:120,render:function(e,a){return e("div",[e("span",Object(s["c"])(t.AllEnums,"CommunicationType",a.row.CommunicationType)||"全部")])}},{title:"状态",key:"Enable",width:80,render:function(t,e){return t("div",[t("span",{style:{color:e.row.Enable?"green":"red"}},e.row.Enable?"启用":"禁用")])}},{title:"回复内容",key:"Message",minWidth:180,render:function(e,a){return t.tdTip(e,a,"Message")}},{title:"备注",key:"Remark",render:function(e,a){return t.tdTip(e,a,"Remark")}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){var n=[];return n.push(e("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.editCommand(a.index)}}})),n.push(e("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete([a.row.Id])}}})),e("div",n)}}],QueryForm:{PageIndex:1,PageSize:50},PageInfo:{Total:0,PageSizeOpts:[10,20,50,100]},AllEnums:{},QLPanels:[],CommadnData:[],EditCommandModal:{Show:!1,Title:"添加快捷回复",Data:{Enable:!0,EnableAll:!1,EnvType:"",Weight:1}},SelectAllQL:!0,ruleValidate:{Name:[{required:!0,message:"指令不能为空",trigger:"blur"}],Value:[{required:!0,message:"回复内容不能为空",trigger:"blur"}]}}},methods:{appointQLPanel:function(){},deleteSelection:function(){var t=[],e=this.$refs.EnvTable.getSelection();if(null!=e&&0!=e.length){for(var a=0;a<e.length;a++){var n=e[a];t.push(n.Id)}this.delete(t)}else this.$Message.warning("请选中后再操作！")},EnvTypeChange:function(){this.SelectAllQL=1==this.EnvType,this.SelectAllQLChange()},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var a=JSON.parse(JSON.stringify(e.EditCommandModal.Data));d(a).then((function(t){t&&(e.$Message.success(e.EditCommandModal.Title+"成功！"),e.EditCommandModal.Show=!1,e.LoadCommand())}))}}))},SyncEnv:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;this.$Modal.confirm({title:"同步确认",content:"同步操作为单项同步，确认同步吗？该操作不可逆。",okText:"是的",cancelText:"算了",closable:!0,onOk:function(){SyncEnv().then((function(e){e&&(t.$Message.success("同步快捷回复到青龙容器成功！"),t.LoadCommand(t.PageInfo.PageIndex))}))}})})),handleCancel:function(){this.EditCommandModal.Show=!1},SelectAllQLChange:function(){for(var t=0;t<this.EditCommandModal.Data.QLPanelEnvs.length;t++)this.EditCommandModal.Data.QLPanelEnvs[t].Enable=this.SelectAllQL},editCommand:function(t){t>-1?(this.EditCommandModal.Title="修改快捷回复",this.EditCommandModal.Data=JSON.parse(JSON.stringify(this.CommadnData[t])),this.EditCommandModal.Data.QLPanelEnvs=[]):(this.EditCommandModal.Data={Key:"",Message:"",CommunicationType:null,Enable:!0},this.EditCommandModal.Title="添加快捷回复"),this.EditCommandModal.Show=!0},delete:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"确定删除吗？该操作不可逆。",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){r(t).then((function(t){e.LoadCommand(1)}))}})},loadAllEnums:function(){var t=this;Object(m["a"])().then((function(e){t.AllEnums=e}))},LoadCommand:function(t){var e=this;this.QueryForm.PageIndex=t,l(this.QueryForm).then((function(t){e.CommadnData=t.Data,e.PageInfo.Total=t.TotalCount}))},tdTip:function(t,e,a){var n=this,o=[],i=e.row[a];return o.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:i},on:{click:function(){n.copy(i)}}},i)),t("div",{style:{width:"100%"}},o)},copy:function(t){var e=this;this.$copyText(t).then((function(t){e.$Message.success("复制成功！")}),(function(t){e.$Message.error("复制失败！")}))}},mounted:function(){this.LoadCommand(1),this.loadAllEnums()}},u=c,f=(a("767f"),a("2877")),p=Object(f["a"])(u,n,o,!1,null,null,null);e["default"]=p.exports}}]);