(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d356d84"],{"6a02":function(t,e,a){"use strict";a("ca55")},bea4:function(t,e,a){"use strict";a.r(e);var d=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{margin:"0 0 20px 0"}},[e("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.AddOrUpdate({})}}},[e("Icon",{attrs:{type:"md-add"}}),t._v(" 添加\n    ")],1)],1),e("Table",{ref:"selection",attrs:{stripe:"",border:"",columns:t.columns,data:t.datas}}),e("Modal",{attrs:{"mask-closable":!1,title:t.addOrUpdateModal.title,width:600},model:{value:t.addOrUpdateModal.show,callback:function(e){t.$set(t.addOrUpdateModal,"show",e)},expression:"addOrUpdateModal.show"}},[e("Form",{ref:"EditWxmpForm",attrs:{model:t.addOrUpdateModal.data,rules:t.ruleValidate,"label-width":120}},[e("FormItem",{attrs:{label:"名称",prop:"Name"}},[e("Input",{attrs:{placeholder:"公众号名称"},model:{value:t.addOrUpdateModal.data.Name,callback:function(e){t.$set(t.addOrUpdateModal.data,"Name",e)},expression:"addOrUpdateModal.data.Name"}})],1),e("FormItem",{attrs:{label:"开发者ID",prop:"AppID"}},[e("Input",{attrs:{type:"text",name:"Http",placeholder:""},model:{value:t.addOrUpdateModal.data.AppID,callback:function(e){t.$set(t.addOrUpdateModal.data,"AppID",e)},expression:"addOrUpdateModal.data.AppID"}})],1),e("FormItem",{attrs:{label:"开发者密码",prop:"AppSecret"}},[e("Input",{attrs:{type:"text",name:"AppSecret"},model:{value:t.addOrUpdateModal.data.AppSecret,callback:function(e){t.$set(t.addOrUpdateModal.data,"AppSecret",e)},expression:"addOrUpdateModal.data.AppSecret"}})],1),e("FormItem",{attrs:{label:"开关选项"}},[e("Checkbox",{model:{value:t.addOrUpdateModal.data.Enable,callback:function(e){t.$set(t.addOrUpdateModal.data,"Enable",e)},expression:"addOrUpdateModal.data.Enable"}},[t._v("启用")]),e("Checkbox",{model:{value:t.addOrUpdateModal.data.Approve,callback:function(e){t.$set(t.addOrUpdateModal.data,"Approve",e)},expression:"addOrUpdateModal.data.Approve"}},[t._v("\n          服务号\n        ")])],1),e("FormItem",{attrs:{label:"备注"}},[e("Input",{attrs:{type:"textarea"},model:{value:t.addOrUpdateModal.data.Remark,callback:function(e){t.$set(t.addOrUpdateModal.data,"Remark",e)},expression:"addOrUpdateModal.data.Remark"}})],1),e("transition",{attrs:{name:"slide-down"}},[e("Alert",{attrs:{type:"warning"},scopedSlots:t._u([{key:"desc",fn:function(){return[t._v("开发者ID和开发者密码 请登录 "),e("a",{attrs:{href:"https://mp.weixin.qq.com",target:"_blank"}},[t._v("https://mp.weixin.qq.com/")]),t._v(" 后基本配置中获取")]},proxy:!0}])},[t._v("\n          设置提醒\n          "),[t._v("请正确设置")]],2)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.addOrUpdateModal.show=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submitWxmp("EditWxmpForm")}}},[t._v("提交")])],1)],1)],1)},r=[],n=(a("7f7f"),a("66df")),o=function(){return n["a"].request({url:"/api/Wxmp/list",method:"get"})},i=function(t){return n["a"].request({url:"/api/Wxmp/add-update",data:t,method:"post"})},l=function(t){return n["a"].request({url:"/api/Wxmp/"+t,method:"delete"})},p={data:function(){var t=this;return{columns:[{type:"index",title:"序号",width:70,align:"center"},{type:"selection",width:60,align:"center"},{title:"名称",key:"Name",minWidth:150},{title:"AppID",key:"AppID",minWidth:180,render:function(e,a){return t.tdTip(e,a,"AppID")}},{title:"AppSecret",key:"AppSecret",minWidth:120,render:function(e,a){return t.tdTip(e,a,"AppSecret")}},{title:"状态",key:"Enable",minWidth:90,render:function(t,e){return t("div",[t("span",{style:{color:e.row.Enable?"green":"red"}},e.row.Enable?"启用":"禁用")])}},{title:"服务地址",minWidth:220,render:function(e,a){return t.tdTip(e,a,"EncodingAESKey","http://域名/api/wxmp/"+a.row.AppID)}},{title:"备注",key:"Remark"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){var d=[];return d.push(e("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.AddOrUpdate(a.row)}}})),d.push(e("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete(a.row.Id)}}})),e("div",d)}}],datas:[],addOrUpdateModal:{show:!1,data:{Enable:!0},title:"添加微信公众号"},ruleValidate:{Name:[{required:!0,message:"名称不能为空",trigger:"blur"}],Code:[{required:!0,message:"编码不能为空",trigger:"blur"},{type:"string",pattern:/^[A-Za-z0-9]+$/,message:"编码只能包含数字和字母",trigger:"blur"}],AppID:[{required:!0,message:"AppID不能为空"}],AppSecret:[{required:!0,message:"AppSecret不能为空"}]}}},methods:{AddOrUpdate:function(t){this.addOrUpdateModal.show=!0,t.Id?(this.addOrUpdateModal.data=JSON.parse(JSON.stringify(t)),this.addOrUpdateModal.title="修改微信公众号"):this.addOrUpdateModal.title="添加微信公众号"},tdTip:function(t,e,a,d){var r=this,n=[];return n.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:d||e.row[a]},on:{click:function(){r.copy(d||e.row[a])}}},d||e.row[a])),t("div",{style:{width:"100%"}},n)},copy:function(t){var e=this;this.$copyText(t).then((function(t){e.$Message.success("复制成功！")}),(function(t){e.$Message.error("复制失败！")}))},delete:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"确定删除公众号配置吗？删除后通过该公众号提交的账号将得不到消息推送，该操作不可逆。",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){l(t).then((function(t){e.getList()}))}})},submitWxmp:function(t){var e=this;this.$refs[t].validate((function(t){t&&i(e.addOrUpdateModal.data).then((function(t){t&&(e.$Message.success(e.addOrUpdateModal.title+"成功！"),e.addOrUpdateModal.show=!1,e.getList())}))}))},getList:function(){var t=this;o().then((function(e){t.datas=e}))}},mounted:function(){this.getList()}},s=p,c=(a("6a02"),a("2877")),u=Object(c["a"])(s,d,r,!1,null,null,null);e["default"]=u.exports},ca55:function(t,e,a){}}]);