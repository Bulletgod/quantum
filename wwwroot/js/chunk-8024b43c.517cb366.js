(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8024b43c"],{"25f8":function(t,e,n){"use strict";n.r(e);n("28a5");var o=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Split",{staticStyle:{height:"calc(100% - 30px)"},scopedSlots:t._u([{key:"left",fn:function(){return[e("Tree",{staticStyle:{height:"100%","overflow-y":"auto"},attrs:{data:t.treeDatas},on:{"on-contextmenu":t.handleContextMenu,"on-select-change":t.treeNodeSelectChange},scopedSlots:t._u([{key:"contextMenu",fn:function(){return[e("DropdownItem",{on:{click:t.handleContextMenuEdit}},[t._v("编辑")]),e("DropdownItem",{staticStyle:{color:"#ed4014"},on:{click:t.handleContextMenuDelete}},[t._v("删除")])]},proxy:!0}])})]},proxy:!0},{key:"right",fn:function(){return[e("monaco-editor",{staticClass:"editor",attrs:{language:t.getLanguage,readOnly:!1,editorMounted:t.onEditorMounted},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})]},proxy:!0}]),model:{value:t.split,callback:function(e){t.split=e},expression:"split"}}),e("footer",[e("Button",{staticClass:"saveBtn",attrs:{type:"primary"},on:{click:t.saveFile}},[t._v("保存")])],1)],1)},a=[],i=(n("a481"),n("b199")),c=n("2b77"),s={name:"quantum-scripts",data:function(){return{contextData:null,split:.18,treeDatas:[],content:"",SelectAllQL:!0,QLPanels:[],Files:[],Languages:{".py":"python",".js":"javascript",".json":"json",".sh":"shell",".ts":"typescript"},ModalEdit:!1,fileName:""}},model:{event:"save-success"},computed:{getLanguage:function(){if(this.fileName){var t=this.fileName.split(".");return this.Languages["."+t[t.length-1]]}return"javascript"}},components:{MonacoEditor:c["a"]},methods:{getScriptList:function(){var t=this;Object(i["f"])().then((function(e){t.treeDatas=e}))},handleContextMenu:function(t){this.contextData=t},handleContextMenuEdit:function(){this.$Message.info("Click edit of"+this.contextData.title)},handleContextMenuDelete:function(){this.$Message.info("Click delete of"+this.contextData.title)},getFile:function(){var t=this;Object(i["c"])({fileName:this.fileName}).then((function(e){t.content=e}))},saveFile:function(){var t=this;this.$Modal.confirm({title:"脚本编辑确认",content:"确认保存修改的脚本内容？",okText:"确定",cancelText:"取消",closable:!0,onOk:function(){var e=t.content.replace(/[\r\n]+$/,"");Object(i["g"])({path:t.fileName,content:e}).then((function(e){t.$Notice.success({desc:"修改脚本文件成功"}),t.$emit("save-success")})).catch((function(e){t.$Notice.error({title:"保存脚本文件失败",desc:e})}))}})},onEditorMounted:function(t,e){window.editor=t,window.monaco=e},treeNodeSelectChange:function(t,e){e.path&&(this.fileName=e.path,this.getFile())}},mounted:function(){this.getScriptList()}},r=s,u=(n("fb30"),n("0c7c")),l=Object(u["a"])(r,o,a,!1,null,"4fa4eb54",null);e["default"]=l.exports},b199:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"g",(function(){return r})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return l}));var o=n("66df"),a=function(t){return o["a"].request({url:"/api/Task",params:t,method:"get"})},i=function(t){return o["a"].request({url:"/api/Task",data:t,method:"post"})},c=function(t){return o["a"].request({url:"/api/Task",data:t,method:"delete"})},s=function(t){return o["a"].request({url:"/api/Task/Scripts",params:t,method:"get"})},r=function(t){return o["a"].request({url:"/api/Task/Scripts",data:t,method:"put"})},u=function(t){return o["a"].request({url:"/api/Task/ExecTask",data:t,method:"post"})},l=function(){return o["a"].request({url:"/api/Task/script-list",method:"get"})}},d1b4:function(t,e,n){},fb30:function(t,e,n){"use strict";n("d1b4")}}]);