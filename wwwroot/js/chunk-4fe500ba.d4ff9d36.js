(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fe500ba"],{"3b2b":function(t,e,a){var o=a("7726"),n=a("5dbc"),l=a("86cc").f,s=a("9093").f,i=a("aae3"),r=a("0bfb"),u=o.RegExp,c=u,m=u.prototype,d=/a/g,h=/a/g,p=new u(d)!==d;if(a("9e1e")&&(!p||a("79e5")((function(){return h[a("2b4c")("match")]=!1,u(d)!=d||u(h)==h||"/a/i"!=u(d,"i")})))){u=function(t,e){var a=this instanceof u,o=i(t),l=void 0===e;return!a&&o&&t.constructor===u&&l?t:n(p?new c(o&&!l?t.source:t,e):c((o=t instanceof u)?t.source:t,o&&l?r.call(t):e),a?this:m,u)};for(var f=function(t){t in u||l(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},C=s(c),D=0;C.length>D;)f(C[D++]);m.constructor=u,u.prototype=m,a("2aba")(o,"RegExp",u)}a("7a56")("RegExp")},"4fc37":function(t,e,a){},"7c40":function(t,e,a){"use strict";a("4fc37")},"7d27":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("Form",{attrs:{"label-width":120},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.loadCustomData(1))}}},[e("Row",[e("Col",{attrs:{span:"4"}},[e("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"数据类型"}},[e("Select",{on:{"on-change":function(e){return t.customDataTypeChange(1)}},model:{value:t.QueryForm.CustomDataType,callback:function(e){t.$set(t.QueryForm,"CustomDataType",e)},expression:"QueryForm.CustomDataType"}},t._l(t.CustomDataTypes,(function(a){return e("Option",{key:a.Type,attrs:{value:a.Type}},[t._v(t._s(a.TypeName))])})),1)],1)],1)],1),e("Row",[t._l(t.CustomDataUpdateModal.Columns,(function(a){return e("Col",{key:a.Type,attrs:{span:"4"}},[e("FormItem",{attrs:{label:a.title}},[e("Input",{attrs:{clearable:"",placeholder:"请输入"+a.title},model:{value:t.QueryForm[a.key],callback:function(e){t.$set(t.QueryForm,a.key,e)},expression:"QueryForm[tt.key]"}})],1)],1)})),e("Col",{attrs:{span:"4"}},[e("FormItem",{attrs:{label:"时间范围"}},[e("DatePicker",{attrs:{type:"datetimerange",options:t.DateRangeOptions,placement:"bottom-end",placeholder:"选择时间"},model:{value:t.DataRangeValue,callback:function(e){t.DataRangeValue=e},expression:"DataRangeValue"}})],1)],1)],2),e("Row",[e("Col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[e("Button",{attrs:{type:"info"},on:{click:function(e){return t.loadCustomData(1)}}},[e("Icon",{attrs:{type:"md-search"}}),t._v(" 搜索\n        ")],1)],1)],1)],1)],1),e("br"),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("Button",{attrs:{type:"primary",size:"small"}},[e("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:t.CustomDataTable.Datas,fields:t.ExcelTitle,name:t.TypeName}})],1),t._v("\n     \n    "),e("Button",{attrs:{type:"primary",size:"small"},on:{click:t.addCustomData}},[e("Icon",{attrs:{type:"md-add"}}),t._v(" 添加\n    ")],1),t._v("\n     \n    "),e("Button",{attrs:{type:"error",size:"small"},on:{click:t.deleteSelection}},[e("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除\n    ")],1)],1),e("div",{staticClass:"showTitle"},[e("p",[t._v("表格展示字段：")]),t._l(t.ShowTitles,(function(a){return e("Checkbox",{on:{"on-change":t.changeShowTitles},model:{value:a.Enable,callback:function(e){t.$set(a,"Enable",e)},expression:"item.Enable"}},[t._v(t._s(a.Title)+"\n    ")])}))],2),e("Table",{ref:"CustomDataTable",attrs:{border:"",stripe:"",columns:t.CustomDataTable.Columns,data:t.CustomDataTable.Datas}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{total:t.PageInfo.Total,current:t.QueryForm.PageIndex,"page-size":t.QueryForm.PageSize,"show-sizer":!0,"page-size-opts":t.PageInfo.PageSizeOpts,"show-total":!0},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.loadCustomData}})],1)]),e("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateModal.Title,width:600},model:{value:t.CustomDataUpdateModal.Show,callback:function(e){t.$set(t.CustomDataUpdateModal,"Show",e)},expression:"CustomDataUpdateModal.Show"}},[e("Form",{ref:"EditCustomDataForm",attrs:{"label-width":120}},[t._l(t.CustomDataUpdateModal.Columns,(function(a){return e("FormItem",{attrs:{label:a.title}},[e("Input",{attrs:{placeholder:a.title},model:{value:t.CustomDataUpdateModal.Data[a.key],callback:function(e){t.$set(t.CustomDataUpdateModal.Data,a.key,e)},expression:"CustomDataUpdateModal.Data[tt.key]"}})],1)})),e("FormItem",{key:"CreateTime",attrs:{label:"创建时间"}},[e("Input",{attrs:{placeholder:"创建时间"},model:{value:t.CustomDataUpdateModal.Data.CreateTime,callback:function(e){t.$set(t.CustomDataUpdateModal.Data,"CreateTime",e)},expression:"CustomDataUpdateModal.Data.CreateTime"}})],1)],2),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.CustomDataUpdateModal.Show=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submitCustomData("EditCustomDataForm")}}},[t._v("提交")])],1)],1),e("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateColumnModal.Title,width:600},model:{value:t.CustomDataUpdateColumnModal.Show,callback:function(e){t.$set(t.CustomDataUpdateColumnModal,"Show",e)},expression:"CustomDataUpdateColumnModal.Show"}},[e("Form",{ref:"EditCustomDataForm",attrs:{"label-width":120}},[e("FormItem",{attrs:{label:t.CustomDataUpdateColumnModal.ColumnText}},[e("Input",{attrs:{placeholder:""},model:{value:t.CustomDataUpdateColumnModal.Data,callback:function(e){t.$set(t.CustomDataUpdateColumnModal,"Data",e)},expression:"CustomDataUpdateColumnModal.Data"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.CustomDataUpdateColumnModal.Show=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.updateColumnData()}}},[t._v("提交")])],1)],1)],1)},n=[],l=(a("28a5"),a("96cf"),a("1da1")),s=(a("ac6a"),a("3b2b"),a("a481"),a("86ea")),i={data:function(){return{ShowTitles:[],TypeName:null,ExcelTitle:{},CustomDataUpdateColumnModal:{Show:!1,Title:"",ColumnName:"",Data:"",ColumnText:""},CustomDataTable:{Columns:[],Datas:[]},QueryForm:{PageSize:10,PageIndex:1,CustomDataType:null,Key:""},DataRangeValue:[],DateRangeOptions:{shortcuts:[{text:"今天",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()+864e5),[e,t]}},{text:"最近一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"最近一个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"最近三个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}},{text:"最近半年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-15552e6),[e,t]}},{text:"最近一年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-31536e6),[e,t]}}]},PageInfo:{PageSizeOpts:[10,20,50,100,200,500,1e3,2e3,5e3],Total:0},CustomDataUpdateModal:{Title:"修改数据信息",Show:!1,Data:{},Columns:[]},CustomDataTypes:[]}},methods:{pageSizeChange:function(t){this.QueryForm.PageSize=t,this.loadCustomData(1)},loadCustomData:function(t){var e=this;t||(t=1),this.QueryForm.PageIndex=t,this.QueryForm.createTimeStart=this.DateTimeFormat(this.DataRangeValue[0],"yyyy-MM-dd"),this.QueryForm.createTimeEnd=this.DateTimeFormat(this.DataRangeValue.length>1?this.DataRangeValue[1]:null,"yyyy-MM-dd"),Object(s["c"])(this.QueryForm.CustomDataType,this.QueryForm).then((function(t){e.CustomDataTable.Datas=t.Data,e.PageInfo.Total=t.TotalCount}))},DateTimeFormat:function(t,e){if(!t)return"";var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,t.getFullYear().substr(4-RegExp.$1.length))),a)return new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[o]:("00"+a[o]).substr(a[o].length))),e},updateColumnData:function(){var t=this,e=this.$refs.CustomDataTable.getSelection(),a=[];if(e&&e.length>0)for(var o=0;o<e.length;o++){var n=e[o];a.push(n.Id)}this.$Modal.confirm({title:"操作确认",content:"确认批量修改".concat(a.length>0?"选中的":"本页","【").concat(this.TypeName,"】-【").concat(this.CustomDataUpdateColumnModal.ColumnText,"】字段数据为：【").concat(this.CustomDataUpdateColumnModal.Data,"】？"),okText:"确定",cancelText:"取消",closable:!0,onOk:function(){var e=[];t.CustomDataTable.Datas.forEach((function(o){var n=JSON.parse(JSON.stringify(o));n[t.CustomDataUpdateColumnModal.ColumnName]=t.CustomDataUpdateColumnModal.Data,(!a||0==a.length||a.indexOf(o.Id)>-1)&&e.push(n)})),Object(s["f"])(e).then((function(e){t.loadCustomData(1),t.CustomDataUpdateColumnModal.Show=!1}))}})},submitCustomData:function(){var t=this;this.CustomDataUpdateModal.Data.Id?Object(s["e"])(this.CustomDataUpdateModal.Data).then((function(e){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1})):Object(s["a"])([this.CustomDataUpdateModal.Data]).then((function(e){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1}))},Update:function(t){this.CustomDataUpdateModal.Data=JSON.parse(JSON.stringify(t)),this.CustomDataUpdateModal.Show=!0},tdTip:function(t,e,a){var o=this,n=[],l=e.row[a];return n.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:l},on:{click:function(){o.copy(l)}}},l)),t("div",{style:{width:"100%"}},n)},getSelectIds:function(){var t=[],e=this.$refs.CustomDataTable.getSelection();if(null!==e&&0!==e.length){for(var a=0;a<e.length;a++){var o=e[a];t.push(o.Id)}return t}this.$Message.warning("请选中数据后再操作！")},deleteSelection:function(){var t=this.getSelectIds();t.length>0&&this.delete(t)},addCustomData:function(){this.CustomDataUpdateModal.Data={Type:this.QueryForm.CustomDataType},this.CustomDataUpdateModal.Show=!0},delete:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"确定删除选中的数据？",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){Object(s["b"])(t).then((function(t){e.loadCustomData(e.QueryForm.PageIndex)}))}})},copy:function(t){var e=this;this.$copyText(t).then((function(t){e.$Message.success("复制成功！")}),(function(t){e.$Message.error("复制失败！")}))},getAllCustomDataTypes:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:e=t.sent,this.CustomDataTypes=e,this.CustomDataTypes&&this.CustomDataTypes.length>0&&(this.getTitles(),this.customDataTypeChange(),this.changeTableHeader());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),customDataTypeChange:function(){var t=this;this.loadCustomData(1),this.CustomDataUpdateModal.Columns=[];var e=this.CustomDataTypes.filter((function(e){return e.Type==t.QueryForm.CustomDataType}))[0];for(var a in e){for(var o=0;o<this.CustomDataUpdateModal.Columns.length;o++)this.QueryForm[this.CustomDataUpdateModal.Columns[o].key]="";if(e[a]&&"Id"!=a&&"Type"!=a&&"TypeName"!=a){var n=a.replace("Title","Data");this.ExcelTitle[e[a]]=n;var l={title:e[a],key:n};this.CustomDataUpdateModal.Columns.push(l)}}},getTitles:function(){var t=this;this.ShowTitles=[];var e=this.CustomDataTypes.filter((function(e){return e.Type==t.QueryForm.CustomDataType}))[0],a=localStorage.getItem("ShowTitles:"+this.QueryForm.CustomDataType);for(var o in a&&(a=JSON.parse(a)),e)o.indexOf("Title")>-1&&e[o]&&this.ShowTitles.push({Key:o,Title:e[o],Enable:!a||0==a.length||a.indexOf(o)>-1});this.ShowTitles.push({Key:"CreateTime",Title:"创建时间",Enable:!a||0==a.length||a.indexOf("CreateTime")>-1}),this.ShowTitles.push({Key:"UpdateTime",Title:"更新时间",Enable:!a||0==a.length||a.indexOf("UpdateTime")>-1})},changeTableHeader:function(){var t=this,e=this.CustomDataTypes.filter((function(e){return e.Type==t.QueryForm.CustomDataType}))[0];this.TypeName=e.TypeName,this.CustomDataTable.Columns=[{type:"selection",width:60,resizable:!0,align:"center"},{width:80,type:"index",title:"序号",resizable:!0,align:"center"}],this.ExcelTitle={};for(var a=0;a<this.ShowTitles.length;a++){var o=this.ShowTitles[a];if(o.Enable){var n=o.Key.replace("Title","Data");this.ExcelTitle[o.Title]=n;var l={title:o.Title,key:n,minWidth:90,ellipsis:!0,resizable:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)},renderHeader:function(e,a){return e("div",[e("a",{style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:a.column.title},on:{click:function(){t.CustomDataTable.Datas&&0!=t.CustomDataTable.Datas.length?(t.CustomDataUpdateColumnModal.ColumnText=a.column.title,t.CustomDataUpdateColumnModal.Data=t.CustomDataTable.Datas[0][a.column.key],t.CustomDataUpdateColumnModal.ColumnName=a.column.key,t.CustomDataUpdateColumnModal.Show=!0,t.CustomDataUpdateColumnModal.Title="批量修改【".concat(t.TypeName,"】【").concat(a.column.title,"】数据")):t.$Message.warning("当前页面无数据，无法进行批量操作！")}}},a.column.title)])}};this.CustomDataTable.Columns.push(l)}}this.ExcelTitle["时间"]="CreateTime",this.CustomDataTable.Columns.push({title:"操作",key:"action",width:90,resizable:!0,align:"center",render:function(e,a){var o=[];return o.push(e("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.Update(a.row)}}})),o.push(e("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete([a.row.Id])}}})),e("div",o)}})},changeShowTitles:function(){for(var t=[],e=0;e<this.ShowTitles.length;e++){var a=this.ShowTitles[e];a.Enable&&t.push(a.Key)}localStorage.setItem("ShowTitles:"+this.QueryForm.CustomDataType,JSON.stringify(t)),this.changeTableHeader()}},mounted:function(){this.QueryForm.CustomDataType=location.href.split("/")[location.href.split("/").length-1],console.log(this.QueryForm.CustomDataType),this.getAllCustomDataTypes(),this.loadCustomData(1)}},r=i,u=(a("7c40"),a("2877")),c=Object(u["a"])(r,o,n,!1,null,null,null);e["default"]=c.exports},a481:function(t,e,a){"use strict";var o=a("cb7c"),n=a("4bf8"),l=a("9def"),s=a("4588"),i=a("0390"),r=a("5f1b"),u=Math.max,c=Math.min,m=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,f){return[function(o,n){var l=t(this),s=void 0==o?void 0:o[e];return void 0!==s?s.call(o,l,n):a.call(String(l),o,n)},function(t,e){var n=f(a,t,this,e);if(n.done)return n.value;var m=o(t),d=String(this),h="function"===typeof e;h||(e=String(e));var D=m.global;if(D){var y=m.unicode;m.lastIndex=0}var g=[];while(1){var T=r(m,d);if(null===T)break;if(g.push(T),!D)break;var v=String(T[0]);""===v&&(m.lastIndex=i(d,l(m.lastIndex),y))}for(var b="",w=0,x=0;x<g.length;x++){T=g[x];for(var S=String(T[0]),M=u(c(s(T.index),d.length),0),k=[],U=1;U<T.length;U++)k.push(p(T[U]));var F=T.groups;if(h){var I=[S].concat(k,M,d);void 0!==F&&I.push(F);var O=String(e.apply(void 0,I))}else O=C(S,d,M,k,F,e);M>=w&&(b+=d.slice(w,M)+O,w=M+S.length)}return b+d.slice(w)}];function C(t,e,o,l,s,i){var r=o+t.length,u=l.length,c=h;return void 0!==s&&(s=n(s),c=d),a.call(i,c,(function(a,n){var i;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,o);case"'":return e.slice(r);case"<":i=s[n.slice(1,-1)];break;default:var c=+n;if(0===c)return a;if(c>u){var d=m(c/10);return 0===d?a:d<=u?void 0===l[d-1]?n.charAt(1):l[d-1]+n.charAt(1):a}i=l[c-1]}return void 0===i?"":i}))}}))}}]);