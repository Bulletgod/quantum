(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38832d19"],{"7d27":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Form",{attrs:{"label-width":80},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.loadCustomData(1))}}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"数据类型"}},[a("Select",{attrs:{clearable:""},on:{"on-change":function(e){return t.customDataTypeChange(1)}},model:{value:t.QueryForm.CustomDataType,callback:function(e){t.$set(t.QueryForm,"CustomDataType",e)},expression:"QueryForm.CustomDataType"}},t._l(t.CustomDataTypes,(function(e){return a("Option",{key:e.Type,attrs:{value:e.Type}},[t._v(t._s(e.TypeName))])})),1)],1)],1),a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"搜索"}},[a("Input",{attrs:{placeholder:"输入字段值"},model:{value:t.QueryForm.Key,callback:function(e){t.$set(t.QueryForm,"Key",e)},expression:"QueryForm.Key"}})],1)],1),t._v("\n         \n        "),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.loadCustomData(1)}}},[a("Icon",{attrs:{type:"md-search"}}),t._v(" 搜索\n        ")],1)],1)],1)],1),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary",size:"small"}},[a("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:t.CustomDataTable.Datas,fields:t.ExcelTitle,name:t.TypeName}})],1),t._v("\n     \n    "),a("Button",{attrs:{type:"error",size:"small"},on:{click:t.deleteSelection}},[a("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除\n    ")],1)],1),a("Table",{ref:"CustomDataTable",attrs:{stripe:"",border:"",columns:t.CustomDataTable.Columns,data:t.CustomDataTable.Datas}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.PageInfo.Total,current:t.QueryForm.PageIndex,"page-size":t.QueryForm.PageSize,"show-sizer":!0,"page-size-opts":t.PageInfo.PageSizeOpts,"show-total":!0},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.loadCustomData}})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateModal.Title,width:600},model:{value:t.CustomDataUpdateModal.Show,callback:function(e){t.$set(t.CustomDataUpdateModal,"Show",e)},expression:"CustomDataUpdateModal.Show"}},[a("Form",{ref:"EditCustomDataForm",attrs:{model:t.CustomDataUpdateModal.Data,"label-width":80}},t._l(t.CustomDataUpdateModal.Columns,(function(e){return a("FormItem",{key:e.Type,attrs:{label:e.title}},[a("Input",{model:{value:t.CustomDataUpdateModal.Data[e.key],callback:function(a){t.$set(t.CustomDataUpdateModal.Data,e.key,a)},expression:"CustomDataUpdateModal.Data[tt.key]"}})],1)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.CustomDataUpdateModal.Show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submitCustomData("EditCustomDataForm")}}},[t._v("提交")])],1)],1)],1)},n=[],s=(a("a481"),a("96cf"),a("1da1")),r=a("66df"),i=function(t,e){return r["a"].request({url:"/api/CustomData/"+t,method:"get",params:e})},l=function(t){return r["a"].request({url:"/api/CustomData",data:t,method:"delete"})},u=function(t){return r["a"].request({url:"/api/CustomData",data:t,method:"put"})},c=function(){return r["a"].request({url:"/api/CustomDataTitle",method:"get"})},d={data:function(){return{TypeName:null,ExcelTitle:{},CustomDataTable:{Columns:[],Datas:[]},QueryForm:{PageSize:2e3,PageIndex:10,CustomDataType:null,Key:""},PageInfo:{PageSizeOpts:[10,20,50,100,200,500,1e3,2e3,5e3,1e4,5e4],Total:0},CustomDataUpdateModal:{Title:"修改灵活数据信息",Show:!1,Data:{},Columns:[]},CustomDataTypes:[]}},methods:{pageSizeChange:function(t){this.QueryForm.PageSize=t,this.loadCustomData(1)},loadCustomData:function(t){var e=this;t||(t=1),this.QueryForm.PageIndex=t,i(this.QueryForm.CustomDataType,this.QueryForm).then((function(t){e.CustomDataTable.Datas=t.Data,e.PageInfo.Total=t.TotalCount}))},submitCustomData:function(){var t=this;u(this.CustomDataUpdateModal.Data).then((function(e){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1}))},Update:function(t){this.CustomDataUpdateModal.Data=JSON.parse(JSON.stringify(t)),this.CustomDataUpdateModal.Show=!0},tdTip:function(t,e,a){var o=this,n=[],s=e.row[a];return n.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:s},on:{click:function(){o.copy(s)}}},s)),t("div",{style:{width:"100%"}},n)},getSelectIds:function(){var t=[],e=this.$refs.CustomDataTable.getSelection();if(null!==e&&0!==e.length){for(var a=0;a<e.length;a++){var o=e[a];t.push(o.Id)}return t}this.$Message.warning("请选中用户后再操作！")},deleteSelection:function(){var t=this.getSelectIds();t.length>0&&this.delete(t)},delete:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"确定删除选中的数据？",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){l(t).then((function(t){e.loadCustomData(e.QueryForm.PageIndex)}))}})},copy:function(t){var e=this;this.$copyText(t).then((function(t){e.$Message.success("复制成功！")}),(function(t){e.$Message.error("复制失败！")}))},getAllCustomDataTypes:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:e=t.sent,this.CustomDataTypes=e,this.CustomDataTypes&&this.CustomDataTypes.length>0&&(this.QueryForm.CustomDataType=this.CustomDataTypes[0].Type,this.customDataTypeChange());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),customDataTypeChange:function(){var t=this;this.loadCustomData(1);var e=this.CustomDataTypes.filter((function(e){return e.Type==t.QueryForm.CustomDataType}))[0];for(var a in this.TypeName=e.TypeName,this.CustomDataTable.Columns=[{type:"selection",width:60,align:"center"}],this.ExcelTitle={},this.CustomDataUpdateModal.Columns=[],e)if(e[a]&&"Id"!=a&&"Type"!=a&&"TypeName"!=a){var o=a.replace("Title","Data");this.ExcelTitle[e[a]]=o;var n={title:e[a],key:o,minWidth:90,ellipsis:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)}};this.CustomDataUpdateModal.Columns.push(n),this.CustomDataTable.Columns.push(n)}this.CustomDataTable.Columns.push({title:"时间",key:"CreateTime",minWidth:90,ellipsis:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)}}),this.ExcelTitle["时间"]="CreateTime",this.CustomDataTable.Columns.push({title:"操作",key:"action",width:150,align:"center",render:function(e,a){var o=[];return o.push(e("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.Update(a.row)}}})),o.push(e("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete([a.row.Id])}}})),e("div",o)}})}},mounted:function(){this.getAllCustomDataTypes(),this.loadCustomData(1)}},m=d,p=(a("9a92"),a("2877")),h=Object(p["a"])(m,o,n,!1,null,null,null);e["default"]=h.exports},"9a92":function(t,e,a){"use strict";a("c7f0")},a481:function(t,e,a){"use strict";var o=a("cb7c"),n=a("4bf8"),s=a("9def"),r=a("4588"),i=a("0390"),l=a("5f1b"),u=Math.max,c=Math.min,d=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,f){return[function(o,n){var s=t(this),r=void 0==o?void 0:o[e];return void 0!==r?r.call(o,s,n):a.call(String(s),o,n)},function(t,e){var n=f(a,t,this,e);if(n.done)return n.value;var d=o(t),m=String(this),p="function"===typeof e;p||(e=String(e));var C=d.global;if(C){var D=d.unicode;d.lastIndex=0}var v=[];while(1){var g=l(d,m);if(null===g)break;if(v.push(g),!C)break;var T=String(g[0]);""===T&&(d.lastIndex=i(m,s(d.lastIndex),D))}for(var b="",w=0,k=0;k<v.length;k++){g=v[k];for(var x=String(g[0]),S=u(c(r(g.index),m.length),0),M=[],I=1;I<g.length;I++)M.push(h(g[I]));var F=g.groups;if(p){var U=[x].concat(M,S,m);void 0!==F&&U.push(F);var $=String(e.apply(void 0,U))}else $=y(x,m,S,M,F,e);S>=w&&(b+=m.slice(w,S)+$,w=S+x.length)}return b+m.slice(w)}];function y(t,e,o,s,r,i){var l=o+t.length,u=s.length,c=p;return void 0!==r&&(r=n(r),c=m),a.call(i,c,(function(a,n){var i;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,o);case"'":return e.slice(l);case"<":i=r[n.slice(1,-1)];break;default:var c=+n;if(0===c)return a;if(c>u){var m=d(c/10);return 0===m?a:m<=u?void 0===s[m-1]?n.charAt(1):s[m-1]+n.charAt(1):a}i=s[c-1]}return void 0===i?"":i}))}}))},c7f0:function(t,e,a){}}]);