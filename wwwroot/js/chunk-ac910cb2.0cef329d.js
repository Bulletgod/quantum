(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac910cb2"],{"569d":function(e,t,n){},"5c56":function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("Breadcrumb",{staticClass:"breadcrumb"},[n("Breadcrumb-Item",[e._v("青龙配置文件编辑")]),n("Breadcrumb-Item",[n("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},on:{"on-change":e.changeSelectQL},model:{value:e.SelectQLId,callback:function(t){e.SelectQLId=t},expression:"SelectQLId"}},e._l(e.QLPanels,(function(t){return n("Option",{key:t.value,attrs:{value:t.Id}},[e._v(e._s(t.Name))])})),1)],1),n("Breadcrumb-Item",[n("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},on:{"on-change":e.getFile},model:{value:e.SelectFileName,callback:function(t){e.SelectFileName=t},expression:"SelectFileName"}},e._l(e.Files,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.title))])})),1)],1)],1),n("monaco-editor",{staticClass:"editor",attrs:{language:e.getLanguage,readOnly:!1,editorMounted:e.onEditorMounted},on:{change:e.onChange},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),n("footer",[n("div",{staticStyle:{float:"left"}},[n("div",{staticStyle:{float:"left","margin-right":"10px"}},[e._v("\n        容器同步\n        "),n("Checkbox",{on:{change:e.SelectAllQLChange},model:{value:e.SelectAllQL,callback:function(t){e.SelectAllQL=t},expression:"SelectAllQL"}},[e._v("\n          全选\n        ")])],1),e._l(e.QLPanels,(function(t){return n("div",{key:t.Id,staticStyle:{float:"left","margin-right":"10px"}},[n("Checkbox",{model:{value:t.Enable,callback:function(n){e.$set(t,"Enable",n)},expression:"data.Enable"}},[e._v("\n          "+e._s(t.Name)+"\n        ")])],1)}))],2),n("Button",{staticClass:"saveBtn",attrs:{type:"primary"},on:{click:e.saveFile}},[e._v("保存")])],1)],1)},a=[],i=(n("28a5"),n("ad8c")),c=n("66df"),o=function(e){return c["a"].request({url:"/api/QLConfig/"+e,method:"get"})},s=function(e,t){return c["a"].request({url:"/api/QLConfig/".concat(e,"/").concat(t),method:"get"})},u=function(e){return c["a"].request({url:"/api/QLConfig/save",data:e,method:"post"})},r=n("2b77"),d={data:function(){return{content:"{}",SelectAllQL:!0,QLPanels:[],Files:[],SelectQLId:null,SelectFileName:null,Languages:{".py":"python",".js":"javascript",".json":"json",".sh":"shell",".ts":"typescript"}}},computed:{getLanguage:function(){if(this.SelectFileName){var e=this.SelectFileName.split(".");return this.Languages["."+e[e.length-1]]}return"javascript"}},components:{MonacoEditor:r["a"]},loadQLPanels:function(){var e=this;Object(i["b"])().then((function(t){e.QLPanels=t}))},methods:{getQLPanels:function(){var e=this;Object(i["b"])().then((function(t){e.QLPanels=t,e.SelectQLId=t[0].Id,e.getFiles()}))},SelectAllQLChange:function(){this.updateCheckQLs(this.SelectAllQL)},getFiles:function(){var e=this;o(this.SelectQLId).then((function(t){e.Files=t,e.SelectFileName="config.sh",e.getFile()}))},getFile:function(){var e=this;console.log("getFile"),s(this.SelectQLId,this.SelectFileName).then((function(t){e.content=t}))},changeSelectQL:function(){this.updateCheckQLs(),this.getFiles()},updateCheckQLs:function(){for(var e=0;e<this.QLPanels.length;e++)this.QLPanels[e].Enable=this.SelectAllQL?this.SelectAllQL:this.SelectQLId==this.QLPanels[e].Id},saveFile:function(){for(var e=this,t=[],n=0;n<this.QLPanels.length;n++)this.QLPanels[n].Enable&&t.push(this.QLPanels[n].Id);u({name:this.SelectFileName,content:this.content,QLIds:t}).then((function(t){e.$Notice.success({desc:"修改青龙配置文件成功"})})).catch((function(e){this.$Notice.error({title:"保存青龙配置文件失败",desc:e})}))},onChange:function(e){},onEditorMounted:function(e,t){window.editor=e,window.monaco=t}},mounted:function(){this.getQLPanels()}},h=d,f=(n("b08f"),n("2877")),g=Object(f["a"])(h,l,a,!1,null,"7610051e",null);t["default"]=g.exports},ad8c:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s}));var l=n("66df"),a=function(){return l["a"].request({url:"/api/QLPanel",method:"get"})},i=function(e){return l["a"].request({url:"/api/QLPanel",data:e,method:"post"})},c=function(e){return l["a"].request({url:"/api/QLPanel/"+e,method:"delete"})},o=function(){return l["a"].request({url:"/api/QLPanel/RefreshToken",method:"get"})},s=function(){return l["a"].request({url:"/api/QLPanel/RefreshLogin",method:"get"})}},b08f:function(e,t,n){"use strict";n("569d")}}]);