(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-307c9627"],{"3b2b":function(t,a,e){var o=e("7726"),n=e("5dbc"),l=e("86cc").f,s=e("9093").f,r=e("aae3"),i=e("0bfb"),u=o.RegExp,c=u,m=u.prototype,d=/a/g,p=/a/g,h=new u(d)!==d;if(e("9e1e")&&(!h||e("79e5")((function(){return p[e("2b4c")("match")]=!1,u(d)!=d||u(p)==p||"/a/i"!=u(d,"i")})))){u=function(t,a){var e=this instanceof u,o=r(t),l=void 0===a;return!e&&o&&t.constructor===u&&l?t:n(h?new c(o&&!l?t.source:t,a):c((o=t instanceof u)?t.source:t,o&&l?i.call(t):a),e?this:m,u)};for(var D=function(t){t in u||l(u,t,{configurable:!0,get:function(){return c[t]},set:function(a){c[t]=a}})},C=s(c),f=0;C.length>f;)D(C[f++]);m.constructor=u,u.prototype=m,e("2aba")(o,"RegExp",u)}e("7a56")("RegExp")},"7d27":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",[e("Form",{attrs:{"label-width":120},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),t.loadCustomData(1))}}},[e("Row",[e("Col",{attrs:{span:"4"}},[e("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"数据类型"}},[e("Select",{on:{"on-change":function(a){return t.customDataTypeChange(1)}},model:{value:t.QueryForm.CustomDataType,callback:function(a){t.$set(t.QueryForm,"CustomDataType",a)},expression:"QueryForm.CustomDataType"}},t._l(t.CustomDataTypes,(function(a){return e("Option",{key:a.Type,attrs:{value:a.Type}},[t._v(t._s(a.TypeName))])})),1)],1)],1)],1),e("Row",[t._l(t.CustomDataUpdateModal.Columns,(function(a){return e("Col",{key:a.Type,attrs:{span:"4"}},[e("FormItem",{attrs:{label:a.title}},[e("Input",{attrs:{clearable:"",placeholder:"请输入"+a.title},model:{value:t.QueryForm[a.key],callback:function(e){t.$set(t.QueryForm,a.key,e)},expression:"QueryForm[tt.key]"}})],1)],1)})),e("Col",{attrs:{span:"4"}},[e("FormItem",{attrs:{label:"时间范围"}},[e("DatePicker",{attrs:{type:"daterange",options:t.DateRangeOptions,placement:"bottom-end",placeholder:"选择时间"},model:{value:t.DataRangeValue,callback:function(a){t.DataRangeValue=a},expression:"DataRangeValue"}})],1)],1)],2),e("Row",[e("Col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[e("Button",{attrs:{type:"info"},on:{click:function(a){return t.loadCustomData(1)}}},[e("Icon",{attrs:{type:"md-search"}}),t._v(" 搜索\n        ")],1)],1)],1)],1)],1),e("br"),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("Button",{attrs:{type:"primary",size:"small"}},[e("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:t.CustomDataTable.Datas,fields:t.ExcelTitle,name:t.TypeName}})],1),t._v("\n     \n    "),e("Button",{attrs:{type:"primary",size:"small"},on:{click:t.addCustomData}},[e("Icon",{attrs:{type:"md-add"}}),t._v(" 添加\n    ")],1),t._v("\n     \n    "),e("Button",{attrs:{type:"error",size:"small"},on:{click:t.deleteSelection}},[e("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除\n    ")],1)],1),e("Table",{ref:"CustomDataTable",attrs:{border:"",stripe:"",columns:t.CustomDataTable.Columns,data:t.CustomDataTable.Datas}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{total:t.PageInfo.Total,current:t.QueryForm.PageIndex,"page-size":t.QueryForm.PageSize,"show-sizer":!0,"page-size-opts":t.PageInfo.PageSizeOpts,"show-total":!0},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.loadCustomData}})],1)]),e("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateModal.Title,width:600},model:{value:t.CustomDataUpdateModal.Show,callback:function(a){t.$set(t.CustomDataUpdateModal,"Show",a)},expression:"CustomDataUpdateModal.Show"}},[e("Form",{ref:"EditCustomDataForm",attrs:{"label-width":120}},[t._l(t.CustomDataUpdateModal.Columns,(function(a){return e("FormItem",{key:a.Type,attrs:{label:a.title}},[e("Input",{attrs:{placeholder:a.title},model:{value:t.CustomDataUpdateModal.Data[a.key],callback:function(e){t.$set(t.CustomDataUpdateModal.Data,a.key,e)},expression:"CustomDataUpdateModal.Data[tt.key]"}})],1)})),e("FormItem",{key:"CreateTime",attrs:{label:"创建时间"}},[e("Input",{attrs:{placeholder:"创建时间"},model:{value:t.CustomDataUpdateModal.Data.CreateTime,callback:function(a){t.$set(t.CustomDataUpdateModal.Data,"CreateTime",a)},expression:"CustomDataUpdateModal.Data.CreateTime"}})],1)],2),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(a){t.CustomDataUpdateModal.Show=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary"},on:{click:function(a){return t.submitCustomData("EditCustomDataForm")}}},[t._v("提交")])],1)],1),e("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateColumnModal.Title,width:600},model:{value:t.CustomDataUpdateColumnModal.Show,callback:function(a){t.$set(t.CustomDataUpdateColumnModal,"Show",a)},expression:"CustomDataUpdateColumnModal.Show"}},[e("Form",{ref:"EditCustomDataForm",attrs:{"label-width":120}},[e("FormItem",{attrs:{label:t.CustomDataUpdateColumnModal.ColumnText}},[e("Input",{attrs:{placeholder:""},model:{value:t.CustomDataUpdateColumnModal.Data,callback:function(a){t.$set(t.CustomDataUpdateColumnModal,"Data",a)},expression:"CustomDataUpdateColumnModal.Data"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(a){t.CustomDataUpdateColumnModal.Show=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary"},on:{click:function(a){return t.updateColumnData()}}},[t._v("提交")])],1)],1)],1)},n=[],l=(e("28a5"),e("96cf"),e("1da1")),s=(e("ac6a"),e("3b2b"),e("a481"),e("86ea")),r={data:function(){return{TypeName:null,ExcelTitle:{},CustomDataUpdateColumnModal:{Show:!1,Title:"",ColumnName:"",Data:"",ColumnText:""},CustomDataTable:{Columns:[],Datas:[]},QueryForm:{PageSize:20,PageIndex:1,CustomDataType:null,Key:""},DataRangeValue:[],DateRangeOptions:{shortcuts:[{text:"今天",value:function(){var t=new Date,a=new Date;return t.setTime(a.getTime()+864e5),[a,t]}},{text:"最近一周",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-6048e5),[a,t]}},{text:"最近一个月",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-2592e6),[a,t]}},{text:"最近三个月",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-7776e6),[a,t]}},{text:"最近半年",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-15552e6),[a,t]}},{text:"最近一年",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-31536e6),[a,t]}}]},PageInfo:{PageSizeOpts:[20,50,100,200,500,1e3,2e3,5e3],Total:0},CustomDataUpdateModal:{Title:"修改数据信息",Show:!1,Data:{},Columns:[]},CustomDataTypes:[]}},methods:{pageSizeChange:function(t){this.QueryForm.PageSize=t,this.loadCustomData(1)},loadCustomData:function(t){var a=this;t||(t=1),this.QueryForm.PageIndex=t,this.QueryForm.createTimeStart=this.DateTimeFormat(this.DataRangeValue[0],"yyyy-MM-dd"),this.QueryForm.createTimeEnd=this.DateTimeFormat(this.DataRangeValue.length>1?this.DataRangeValue[1]:null,"yyyy-MM-dd"),Object(s["c"])(this.QueryForm.CustomDataType,this.QueryForm).then((function(t){a.CustomDataTable.Datas=t.Data,a.PageInfo.Total=t.TotalCount}))},DateTimeFormat:function(t,a){if(!t)return"";var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var o in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,t.getFullYear().substr(4-RegExp.$1.length))),e)return new RegExp("("+o+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?e[o]:("00"+e[o]).substr(e[o].length))),a},updateColumnData:function(){var t=this;this.$Modal.confirm({title:"操作确认",content:"确认批量修改【".concat(this.TypeName,"】-【").concat(this.CustomDataUpdateColumnModal.ColumnText,"】字段数据为：【").concat(this.CustomDataUpdateColumnModal.Data,"】？"),okText:"确定",cancelText:"取消",closable:!0,onOk:function(){t.CustomDataTable.Datas.forEach((function(a){a[t.CustomDataUpdateColumnModal.ColumnName]=t.CustomDataUpdateColumnModal.Data})),Object(s["f"])(t.CustomDataTable.Datas).then((function(a){t.loadCustomData(1),t.CustomDataUpdateColumnModal.Show=!1}))}})},submitCustomData:function(){var t=this;this.CustomDataUpdateModal.Data.Id?Object(s["e"])(this.CustomDataUpdateModal.Data).then((function(a){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1})):Object(s["a"])([this.CustomDataUpdateModal.Data]).then((function(a){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1}))},Update:function(t){this.CustomDataUpdateModal.Data=JSON.parse(JSON.stringify(t)),this.CustomDataUpdateModal.Show=!0},tdTip:function(t,a,e){var o=this,n=[],l=a.row[e];return n.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:l},on:{click:function(){o.copy(l)}}},l)),t("div",{style:{width:"100%"}},n)},getSelectIds:function(){var t=[],a=this.$refs.CustomDataTable.getSelection();if(null!==a&&0!==a.length){for(var e=0;e<a.length;e++){var o=a[e];t.push(o.Id)}return t}this.$Message.warning("请选中数据后再操作！")},deleteSelection:function(){var t=this.getSelectIds();t.length>0&&this.delete(t)},addCustomData:function(){this.CustomDataUpdateModal.Data={Type:this.QueryForm.CustomDataType},this.CustomDataUpdateModal.Show=!0},delete:function(t){var a=this;this.$Modal.confirm({title:"删除确认",content:"确定删除选中的数据？",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){Object(s["b"])(t).then((function(t){a.loadCustomData(a.QueryForm.PageIndex)}))}})},copy:function(t){var a=this;this.$copyText(t).then((function(t){a.$Message.success("复制成功！")}),(function(t){a.$Message.error("复制失败！")}))},getAllCustomDataTypes:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:a=t.sent,this.CustomDataTypes=a,this.CustomDataTypes&&this.CustomDataTypes.length>0&&this.customDataTypeChange();case 5:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),customDataTypeChange:function(){var t=this;this.loadCustomData(1);var a=this.CustomDataTypes.filter((function(a){return a.Type==t.QueryForm.CustomDataType}))[0];for(var e in this.TypeName=a.TypeName,this.CustomDataTable.Columns=[{type:"selection",width:60,resizable:!0,align:"center"},{width:80,type:"index",title:"序号",resizable:!0,align:"center"}],this.ExcelTitle={},this.CustomDataUpdateModal.Columns=[],a){for(var o=0;o<this.CustomDataUpdateModal.Columns.length;o++)this.QueryForm[this.CustomDataUpdateModal.Columns[o].key]="";if(a[e]&&"Id"!=e&&"Type"!=e&&"TypeName"!=e){var n=e.replace("Title","Data");this.ExcelTitle[a[e]]=n;var l={title:a[e],key:n,minWidth:90,ellipsis:!0,resizable:!0,render:function(a,e){return t.tdTip(a,e,e.column.key)},renderHeader:function(a,e){return a("div",[a("a",{style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:e.column.title},on:{click:function(){t.CustomDataTable.Datas&&0!=t.CustomDataTable.Datas.length?(t.CustomDataUpdateColumnModal.ColumnText=e.column.title,t.CustomDataUpdateColumnModal.Data=t.CustomDataTable.Datas[0][e.column.key],t.CustomDataUpdateColumnModal.ColumnName=e.column.key,t.CustomDataUpdateColumnModal.Show=!0,t.CustomDataUpdateColumnModal.Title="批量修改【".concat(t.TypeName,"】【").concat(e.column.title,"】数据")):t.$Message.warning("当前页面无数据，无法进行批量操作！")}}},e.column.title)])}};this.CustomDataUpdateModal.Columns.push(l),this.CustomDataTable.Columns.push(l)}}this.CustomDataTable.Columns.push({title:"创建时间",key:"CreateTime",width:90,ellipsis:!0,render:function(a,e){return t.tdTip(a,e,e.column.key)}}),this.CustomDataTable.Columns.push({title:"更新时间",key:"UpdateTime",width:90,ellipsis:!0,render:function(a,e){return t.tdTip(a,e,e.column.key)}}),this.ExcelTitle["时间"]="CreateTime",this.CustomDataTable.Columns.push({title:"操作",key:"action",width:90,resizable:!0,align:"center",render:function(a,e){var o=[];return o.push(a("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.Update(e.row)}}})),o.push(a("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete([e.row.Id])}}})),a("div",o)}})}},mounted:function(){this.QueryForm.CustomDataType=location.href.split("/")[location.href.split("/").length-1],console.log(this.QueryForm.CustomDataType),this.getAllCustomDataTypes(),this.loadCustomData(1)}},i=r,u=(e("9a92"),e("2877")),c=Object(u["a"])(i,o,n,!1,null,null,null);a["default"]=c.exports},"9a92":function(t,a,e){"use strict";e("c7f0")},a481:function(t,a,e){"use strict";var o=e("cb7c"),n=e("4bf8"),l=e("9def"),s=e("4588"),r=e("0390"),i=e("5f1b"),u=Math.max,c=Math.min,m=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};e("214f")("replace",2,(function(t,a,e,D){return[function(o,n){var l=t(this),s=void 0==o?void 0:o[a];return void 0!==s?s.call(o,l,n):e.call(String(l),o,n)},function(t,a){var n=D(e,t,this,a);if(n.done)return n.value;var m=o(t),d=String(this),p="function"===typeof a;p||(a=String(a));var f=m.global;if(f){var y=m.unicode;m.lastIndex=0}var g=[];while(1){var v=i(m,d);if(null===v)break;if(g.push(v),!f)break;var T=String(v[0]);""===T&&(m.lastIndex=r(d,l(m.lastIndex),y))}for(var b="",w=0,M=0;M<g.length;M++){v=g[M];for(var x=String(v[0]),k=u(c(s(v.index),d.length),0),U=[],S=1;S<v.length;S++)U.push(h(v[S]));var F=v.groups;if(p){var I=[x].concat(U,k,d);void 0!==F&&I.push(F);var $=String(a.apply(void 0,I))}else $=C(x,d,k,U,F,a);k>=w&&(b+=d.slice(w,k)+$,w=k+x.length)}return b+d.slice(w)}];function C(t,a,o,l,s,r){var i=o+t.length,u=l.length,c=p;return void 0!==s&&(s=n(s),c=d),e.call(r,c,(function(e,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,o);case"'":return a.slice(i);case"<":r=s[n.slice(1,-1)];break;default:var c=+n;if(0===c)return e;if(c>u){var d=m(c/10);return 0===d?e:d<=u?void 0===l[d-1]?n.charAt(1):l[d-1]+n.charAt(1):e}r=l[c-1]}return void 0===r?"":r}))}}))},c7f0:function(t,a,e){}}]);