(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-307c9627"],{"3b2b":function(t,e,a){var n=a("7726"),o=a("5dbc"),s=a("86cc").f,r=a("9093").f,i=a("aae3"),l=a("0bfb"),u=n.RegExp,c=u,m=u.prototype,d=/a/g,p=/a/g,h=new u(d)!==d;if(a("9e1e")&&(!h||a("79e5")((function(){return p[a("2b4c")("match")]=!1,u(d)!=d||u(p)==p||"/a/i"!=u(d,"i")})))){u=function(t,e){var a=this instanceof u,n=i(t),s=void 0===e;return!a&&n&&t.constructor===u&&s?t:o(h?new c(n&&!s?t.source:t,e):c((n=t instanceof u)?t.source:t,n&&s?l.call(t):e),a?this:m,u)};for(var f=function(t){t in u||s(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},y=r(c),D=0;y.length>D;)f(y[D++]);m.constructor=u,u.prototype=m,a("2aba")(n,"RegExp",u)}a("7a56")("RegExp")},"7d27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Form",{attrs:{"label-width":120},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.loadCustomData(1))}}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"数据类型"}},[a("Select",{on:{"on-change":function(e){return t.customDataTypeChange(1)}},model:{value:t.QueryForm.CustomDataType,callback:function(e){t.$set(t.QueryForm,"CustomDataType",e)},expression:"QueryForm.CustomDataType"}},t._l(t.CustomDataTypes,(function(e){return a("Option",{key:e.Type,attrs:{value:e.Type}},[t._v(t._s(e.TypeName))])})),1)],1)],1)],1),a("Row",[t._l(t.CustomDataUpdateModal.Columns,(function(e){return a("Col",{key:e.Type,attrs:{span:"4"}},[a("FormItem",{attrs:{label:e.title}},[a("Input",{attrs:{clearable:"",placeholder:"请输入"+e.title},model:{value:t.QueryForm[e.key],callback:function(a){t.$set(t.QueryForm,e.key,a)},expression:"QueryForm[tt.key]"}})],1)],1)})),a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"时间范围"}},[a("DatePicker",{attrs:{type:"daterange",options:t.DateRangeOptions,placement:"bottom-end",placeholder:"选择时间"},model:{value:t.DataRangeValue,callback:function(e){t.DataRangeValue=e},expression:"DataRangeValue"}})],1)],1)],2),a("Row",[a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[a("Button",{attrs:{type:"info"},on:{click:function(e){return t.loadCustomData(1)}}},[a("Icon",{attrs:{type:"md-search"}}),t._v(" 搜索\n        ")],1)],1)],1)],1)],1),a("br"),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary",size:"small"}},[a("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:t.CustomDataTable.Datas,fields:t.ExcelTitle,name:t.TypeName}})],1),t._v("\n     \n    "),a("Button",{attrs:{type:"primary",size:"small"},on:{click:t.addCustomData}},[a("Icon",{attrs:{type:"md-add"}}),t._v(" 添加\n    ")],1),t._v("\n     \n    "),a("Button",{attrs:{type:"error",size:"small"},on:{click:t.deleteSelection}},[a("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除\n    ")],1)],1),a("Table",{ref:"CustomDataTable",attrs:{stripe:"",border:"",columns:t.CustomDataTable.Columns,data:t.CustomDataTable.Datas}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.PageInfo.Total,current:t.QueryForm.PageIndex,"page-size":t.QueryForm.PageSize,"show-sizer":!0,"page-size-opts":t.PageInfo.PageSizeOpts,"show-total":!0},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.loadCustomData}})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateModal.Title,width:600},model:{value:t.CustomDataUpdateModal.Show,callback:function(e){t.$set(t.CustomDataUpdateModal,"Show",e)},expression:"CustomDataUpdateModal.Show"}},[a("Form",{ref:"EditCustomDataForm",attrs:{model:t.CustomDataUpdateModal.Data,"label-width":120}},t._l(t.CustomDataUpdateModal.Columns,(function(e){return a("FormItem",{key:e.Type,attrs:{label:e.title}},[a("Input",{attrs:{placeholder:e.title},model:{value:t.CustomDataUpdateModal.Data[e.key],callback:function(a){t.$set(t.CustomDataUpdateModal.Data,e.key,a)},expression:"CustomDataUpdateModal.Data[tt.key]"}})],1)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.CustomDataUpdateModal.Show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submitCustomData("EditCustomDataForm")}}},[t._v("提交")])],1)],1)],1)},o=[],s=(a("28a5"),a("96cf"),a("1da1")),r=(a("3b2b"),a("a481"),a("86ea")),i={data:function(){return{TypeName:null,ExcelTitle:{},CustomDataTable:{Columns:[],Datas:[]},QueryForm:{PageSize:10,PageIndex:1,CustomDataType:null,Key:""},DataRangeValue:[],DateRangeOptions:{shortcuts:[{text:"今天",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()+864e5),[e,t]}},{text:"最近一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"最近一个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"最近三个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}},{text:"最近半年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-15552e6),[e,t]}},{text:"最近一年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-31536e6),[e,t]}}]},PageInfo:{PageSizeOpts:[10,20,50,100,200,500,1e3,2e3,5e3,1e4,5e4],Total:0},CustomDataUpdateModal:{Title:"修改数据信息",Show:!1,Data:{},Columns:[]},CustomDataTypes:[]}},methods:{pageSizeChange:function(t){this.QueryForm.PageSize=t,this.loadCustomData(1)},loadCustomData:function(t){var e=this;t||(t=1),this.QueryForm.PageIndex=t,this.QueryForm.createTimeStart=this.DateTimeFormat(this.DataRangeValue[0],"yyyy-MM-dd"),this.QueryForm.createTimeEnd=this.DateTimeFormat(this.DataRangeValue.length>1?this.DataRangeValue[1]:null,"yyyy-MM-dd"),Object(r["c"])(this.QueryForm.CustomDataType,this.QueryForm).then((function(t){e.CustomDataTable.Datas=t.Data,e.PageInfo.Total=t.TotalCount}))},DateTimeFormat:function(t,e){if(!t)return"";var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,t.getFullYear().substr(4-RegExp.$1.length))),a)return new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr(a[n].length))),e},submitCustomData:function(){var t=this;this.CustomDataUpdateModal.Data.Id?Object(r["e"])(this.CustomDataUpdateModal.Data).then((function(e){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1})):Object(r["a"])([this.CustomDataUpdateModal.Data]).then((function(e){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1}))},Update:function(t){this.CustomDataUpdateModal.Data=JSON.parse(JSON.stringify(t)),this.CustomDataUpdateModal.Show=!0},tdTip:function(t,e,a){var n=this,o=[],s=e.row[a];return o.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:s},on:{click:function(){n.copy(s)}}},s)),t("div",{style:{width:"100%"}},o)},getSelectIds:function(){var t=[],e=this.$refs.CustomDataTable.getSelection();if(null!==e&&0!==e.length){for(var a=0;a<e.length;a++){var n=e[a];t.push(n.Id)}return t}this.$Message.warning("请选中数据后再操作！")},deleteSelection:function(){var t=this.getSelectIds();t.length>0&&this.delete(t)},addCustomData:function(){this.CustomDataUpdateModal.Data={Type:this.QueryForm.CustomDataType},this.CustomDataUpdateModal.Show=!0},delete:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"确定删除选中的数据？",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){Object(r["b"])(t).then((function(t){e.loadCustomData(e.QueryForm.PageIndex)}))}})},copy:function(t){var e=this;this.$copyText(t).then((function(t){e.$Message.success("复制成功！")}),(function(t){e.$Message.error("复制失败！")}))},getAllCustomDataTypes:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["d"])();case 2:e=t.sent,this.CustomDataTypes=e,this.CustomDataTypes&&this.CustomDataTypes.length>0&&this.customDataTypeChange();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),customDataTypeChange:function(){var t=this;this.loadCustomData(1);var e=this.CustomDataTypes.filter((function(e){return e.Type==t.QueryForm.CustomDataType}))[0];for(var a in this.TypeName=e.TypeName,this.CustomDataTable.Columns=[{type:"selection",width:60,align:"center"},{width:80,type:"index",title:"序号",align:"center"}],this.ExcelTitle={},this.CustomDataUpdateModal.Columns=[],e){for(var n=0;n<this.CustomDataUpdateModal.Columns.length;n++)this.QueryForm[this.CustomDataUpdateModal.Columns[n].key]="";if(e[a]&&"Id"!=a&&"Type"!=a&&"TypeName"!=a){var o=a.replace("Title","Data");this.ExcelTitle[e[a]]=o;var s={title:e[a],key:o,minWidth:90,ellipsis:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)}};this.CustomDataUpdateModal.Columns.push(s),this.CustomDataTable.Columns.push(s)}}this.CustomDataTable.Columns.push({title:"时间",key:"CreateTime",minWidth:90,ellipsis:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)}}),this.ExcelTitle["时间"]="CreateTime",this.CustomDataTable.Columns.push({title:"操作",key:"action",width:150,align:"center",render:function(e,a){var n=[];return n.push(e("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.Update(a.row)}}})),n.push(e("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete([a.row.Id])}}})),e("div",n)}})}},mounted:function(){this.QueryForm.CustomDataType=location.href.split("/")[location.href.split("/").length-1],console.log(this.QueryForm.CustomDataType),this.getAllCustomDataTypes(),this.loadCustomData(1)}},l=i,u=(a("9a92"),a("2877")),c=Object(u["a"])(l,n,o,!1,null,null,null);e["default"]=c.exports},"9a92":function(t,e,a){"use strict";a("c7f0")},a481:function(t,e,a){"use strict";var n=a("cb7c"),o=a("4bf8"),s=a("9def"),r=a("4588"),i=a("0390"),l=a("5f1b"),u=Math.max,c=Math.min,m=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,f){return[function(n,o){var s=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,s,o):a.call(String(s),n,o)},function(t,e){var o=f(a,t,this,e);if(o.done)return o.value;var m=n(t),d=String(this),p="function"===typeof e;p||(e=String(e));var D=m.global;if(D){var g=m.unicode;m.lastIndex=0}var v=[];while(1){var C=l(m,d);if(null===C)break;if(v.push(C),!D)break;var T=String(C[0]);""===T&&(m.lastIndex=i(d,s(m.lastIndex),g))}for(var w="",b=0,x=0;x<v.length;x++){C=v[x];for(var k=String(C[0]),M=u(c(r(C.index),d.length),0),S=[],F=1;F<C.length;F++)S.push(h(C[F]));var I=C.groups;if(p){var U=[k].concat(S,M,d);void 0!==I&&U.push(I);var R=String(e.apply(void 0,U))}else R=y(k,d,M,S,I,e);M>=b&&(w+=d.slice(b,M)+R,b=M+k.length)}return w+d.slice(b)}];function y(t,e,n,s,r,i){var l=n+t.length,u=s.length,c=p;return void 0!==r&&(r=o(r),c=d),a.call(i,c,(function(a,o){var i;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":i=r[o.slice(1,-1)];break;default:var c=+o;if(0===c)return a;if(c>u){var d=m(c/10);return 0===d?a:d<=u?void 0===s[d-1]?o.charAt(1):s[d-1]+o.charAt(1):a}i=s[c-1]}return void 0===i?"":i}))}}))},c7f0:function(t,e,a){}}]);