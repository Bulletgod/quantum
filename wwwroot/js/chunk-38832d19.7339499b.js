(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38832d19"],{"7d27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Form",{attrs:{"label-width":80},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.loadCustomData(1))}}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"数据类型"}},[a("Select",{on:{"on-change":function(e){return t.customDataTypeChange(1)}},model:{value:t.QueryForm.CustomDataType,callback:function(e){t.$set(t.QueryForm,"CustomDataType",e)},expression:"QueryForm.CustomDataType"}},t._l(t.CustomDataTypes,(function(e){return a("Option",{key:e.Type,attrs:{value:e.Type}},[t._v(t._s(e.TypeName))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"时间范围"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",options:t.DateRangeOptions,placement:"bottom-end",placeholder:"选择时间"},model:{value:t.DataRangeValue,callback:function(e){t.DataRangeValue=e},expression:"DataRangeValue"}})],1)],1),t._v("\n         \n        "),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.loadCustomData(1)}}},[a("Icon",{attrs:{type:"md-search"}}),t._v(" 搜索\n        ")],1)],1),a("Collapse",[a("Panel",[t._v("\n          更多筛选条件\n          "),a("p",{attrs:{slot:"content"},slot:"content"},[a("Row",t._l(t.CustomDataUpdateModal.Columns,(function(e){return a("Col",{key:e.Type,attrs:{span:"4"}},[a("FormItem",{attrs:{label:e.title}},[a("Input",{attrs:{clearable:"",placeholder:"请输入"+e.title},model:{value:t.QueryForm[e.key],callback:function(a){t.$set(t.QueryForm,e.key,a)},expression:"QueryForm[tt.key]"}})],1)],1)})),1)],1)])],1)],1)],1),a("br"),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary",size:"small"}},[a("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:t.CustomDataTable.Datas,fields:t.ExcelTitle,name:t.TypeName}})],1),t._v("\n     \n    "),a("Button",{attrs:{type:"error",size:"small"},on:{click:t.deleteSelection}},[a("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除\n    ")],1)],1),a("Table",{ref:"CustomDataTable",attrs:{stripe:"",border:"",columns:t.CustomDataTable.Columns,data:t.CustomDataTable.Datas}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.PageInfo.Total,current:t.QueryForm.PageIndex,"page-size":t.QueryForm.PageSize,"show-sizer":!0,"page-size-opts":t.PageInfo.PageSizeOpts,"show-total":!0},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.loadCustomData}})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:t.CustomDataUpdateModal.Title,width:600},model:{value:t.CustomDataUpdateModal.Show,callback:function(e){t.$set(t.CustomDataUpdateModal,"Show",e)},expression:"CustomDataUpdateModal.Show"}},[a("Form",{ref:"EditCustomDataForm",attrs:{model:t.CustomDataUpdateModal.Data,"label-width":80}},t._l(t.CustomDataUpdateModal.Columns,(function(e){return a("FormItem",{key:e.Type,attrs:{label:e.title}},[a("Input",{model:{value:t.CustomDataUpdateModal.Data[e.key],callback:function(a){t.$set(t.CustomDataUpdateModal.Data,e.key,a)},expression:"CustomDataUpdateModal.Data[tt.key]"}})],1)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.CustomDataUpdateModal.Show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submitCustomData("EditCustomDataForm")}}},[t._v("提交")])],1)],1)],1)},o=[],r=(a("a481"),a("96cf"),a("1da1")),s=a("66df"),i=function(t,e){return s["a"].request({url:"/api/CustomData/"+t,method:"get",params:e})},l=function(t){return s["a"].request({url:"/api/CustomData",data:t,method:"delete"})},u=function(t){return s["a"].request({url:"/api/CustomData",data:t,method:"put"})},c=function(){return s["a"].request({url:"/api/CustomDataTitle",method:"get"})},m={data:function(){return{TypeName:null,ExcelTitle:{},CustomDataTable:{Columns:[],Datas:[]},QueryForm:{PageSize:200,PageIndex:10,CustomDataType:null,Key:""},DataRangeValue:[],DateRangeOptions:{shortcuts:[{text:"最近一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"最近一个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"最近三个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}},{text:"最近半年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-15552e6),[e,t]}},{text:"最近一年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-31536e6),[e,t]}}]},PageInfo:{PageSizeOpts:[10,20,50,100,200,500,1e3,2e3,5e3,1e4,5e4],Total:0},CustomDataUpdateModal:{Title:"修改自定义数据信息",Show:!1,Data:{},Columns:[]},CustomDataTypes:[]}},methods:{pageSizeChange:function(t){this.QueryForm.PageSize=t,this.loadCustomData(1)},loadCustomData:function(t){var e=this;t||(t=1),this.QueryForm.PageIndex=t,this.QueryForm.createTimeStart=this.DataRangeValue[0],this.QueryForm.createTimeEnd=this.DataRangeValue.length>1?this.DataRangeValue[1]:null,i(this.QueryForm.CustomDataType,this.QueryForm).then((function(t){e.CustomDataTable.Datas=t.Data,e.PageInfo.Total=t.TotalCount}))},submitCustomData:function(){var t=this;u(this.CustomDataUpdateModal.Data).then((function(e){t.loadCustomData(1),t.CustomDataUpdateModal.Show=!1}))},Update:function(t){this.CustomDataUpdateModal.Data=JSON.parse(JSON.stringify(t)),this.CustomDataUpdateModal.Show=!0},tdTip:function(t,e,a){var n=this,o=[],r=e.row[a];return o.push(t("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:r},on:{click:function(){n.copy(r)}}},r)),t("div",{style:{width:"100%"}},o)},getSelectIds:function(){var t=[],e=this.$refs.CustomDataTable.getSelection();if(null!==e&&0!==e.length){for(var a=0;a<e.length;a++){var n=e[a];t.push(n.Id)}return t}this.$Message.warning("请选中用户后再操作！")},deleteSelection:function(){var t=this.getSelectIds();t.length>0&&this.delete(t)},delete:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"确定删除选中的数据？",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){l(t).then((function(t){e.loadCustomData(e.QueryForm.PageIndex)}))}})},copy:function(t){var e=this;this.$copyText(t).then((function(t){e.$Message.success("复制成功！")}),(function(t){e.$Message.error("复制失败！")}))},getAllCustomDataTypes:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:e=t.sent,this.CustomDataTypes=e,this.CustomDataTypes&&this.CustomDataTypes.length>0&&(this.QueryForm.CustomDataType=this.CustomDataTypes[0].Type,this.customDataTypeChange());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),customDataTypeChange:function(){var t=this;this.loadCustomData(1);var e=this.CustomDataTypes.filter((function(e){return e.Type==t.QueryForm.CustomDataType}))[0];for(var a in this.TypeName=e.TypeName,this.CustomDataTable.Columns=[{type:"selection",width:60,align:"center"}],this.ExcelTitle={},this.CustomDataUpdateModal.Columns=[],e)if(e[a]&&"Id"!=a&&"Type"!=a&&"TypeName"!=a){var n=a.replace("Title","Data");this.ExcelTitle[e[a]]=n;var o={title:e[a],key:n,minWidth:90,ellipsis:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)}};this.CustomDataUpdateModal.Columns.push(o),this.CustomDataTable.Columns.push(o)}this.CustomDataTable.Columns.push({title:"时间",key:"CreateTime",minWidth:90,ellipsis:!0,render:function(e,a){return t.tdTip(e,a,a.column.key)}}),this.ExcelTitle["时间"]="CreateTime",this.CustomDataTable.Columns.push({title:"操作",key:"action",width:150,align:"center",render:function(e,a){var n=[];return n.push(e("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){t.Update(a.row)}}})),n.push(e("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){t.delete([a.row.Id])}}})),e("div",n)}})}},mounted:function(){this.getAllCustomDataTypes(),this.loadCustomData(1)}},d=m,p=(a("9a92"),a("2877")),h=Object(p["a"])(d,n,o,!1,null,null,null);e["default"]=h.exports},"9a92":function(t,e,a){"use strict";a("c7f0")},a481:function(t,e,a){"use strict";var n=a("cb7c"),o=a("4bf8"),r=a("9def"),s=a("4588"),i=a("0390"),l=a("5f1b"),u=Math.max,c=Math.min,m=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,f){return[function(n,o){var r=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,r,o):a.call(String(r),n,o)},function(t,e){var o=f(a,t,this,e);if(o.done)return o.value;var m=n(t),d=String(this),p="function"===typeof e;p||(e=String(e));var y=m.global;if(y){var C=m.unicode;m.lastIndex=0}var v=[];while(1){var g=l(m,d);if(null===g)break;if(v.push(g),!y)break;var T=String(g[0]);""===T&&(m.lastIndex=i(d,r(m.lastIndex),C))}for(var w="",b=0,k=0;k<v.length;k++){g=v[k];for(var x=String(g[0]),S=u(c(s(g.index),d.length),0),F=[],M=1;M<g.length;M++)F.push(h(g[M]));var I=g.groups;if(p){var U=[x].concat(F,S,d);void 0!==I&&U.push(I);var Q=String(e.apply(void 0,U))}else Q=D(x,d,S,F,I,e);S>=b&&(w+=d.slice(b,S)+Q,b=S+x.length)}return w+d.slice(b)}];function D(t,e,n,r,s,i){var l=n+t.length,u=r.length,c=p;return void 0!==s&&(s=o(s),c=d),a.call(i,c,(function(a,o){var i;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":i=s[o.slice(1,-1)];break;default:var c=+o;if(0===c)return a;if(c>u){var d=m(c/10);return 0===d?a:d<=u?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):a}i=r[c-1]}return void 0===i?"":i}))}}))},c7f0:function(t,e,a){}}]);