(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5531fdf8"],{"6a83":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("alert",{attrs:{type:"warning","show-icon":""}},[a("template",{slot:"desc"},[a("p",{staticClass:"alert-question"},[t._v("\n        请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n      ")]),a("p",{staticClass:"alert-question"},[t._v("\n        请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n      ")]),a("p",{staticClass:"alert-question"},[t._v("\n        请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n      ")]),a("p",{staticClass:"alert-question"},[t._v("1. Quantum是如何完成迁移工作的？")]),a("p",{staticClass:"alert-answer"},[t._v("\n        第一步：系统自动生成新的数据库。"),a("br"),t._v("\n        第二步：将原来数据库中的重要数据提取出来写入新的数据库。"),a("br"),t._v("\n        第三步：自动修改数据库配置文件。"),a("br")]),a("p",{staticClass:"alert-question"},[t._v("2. SQLite 和 MySQL可以相互迁移吗？")]),a("p",{staticClass:"alert-answer"},[t._v("\n        可以，支持从MySQL迁移到SQLite 或者SQLite 迁移到MySQL\n      ")]),a("p",{staticClass:"alert-question"},[t._v("3. 如何配置迁移？")]),a("p",{staticClass:"alert-answer"},[t._v("\n        1. 数据库类型按需选择。"),a("br"),t._v("\n        2. 填入数据库地址。SQLite原数据库地址为：Quantum.db ,\n        新数据库地址则可以修改成Quantum2.db。\n        新旧数据库地址不能一样。且保证db文件夹中不能有这个文件。"),a("br"),t._v("\n        如需要迁移到MySQL 那么则填写MYSQL\n        数据库连接如:server=192.168.2.2;port=3306;database=Quantum2;Uid=root;Pwd=123456;CharSet=utf8;\n        新的数据库名称不能存在于数据库服务器中。\n      ")]),a("p",{staticClass:"alert-question"},[t._v("\n        迁移后请务必重启量子 docker restart quantum1\n      ")]),a("p",{staticClass:"alert-question"},[t._v("\n        迁移后请务必重启量子 docker restart quantum1\n      ")]),a("p",{staticClass:"alert-question"},[t._v("\n        迁移后请务必重启量子 docker restart quantum1\n      ")])])],2),a("Form",{ref:"MigrationFormData",staticStyle:{padding:"25px"},attrs:{autocomplete:"off",model:t.MigrationFormData,"label-width":120,rules:t.ruleInline},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"原数据库类型"}},[a("radio-group",{attrs:{disabled:""},model:{value:t.Config.DBType,callback:function(e){t.$set(t.Config,"DBType",e)},expression:"Config.DBType"}},[a("radio",{attrs:{disabled:"",label:"SQLite"}},[t._v("SQLite")]),a("radio",{attrs:{disabled:"",label:"MySQL"}},[t._v("MySQL")])],1)],1),a("FormItem",{attrs:{label:"原数据库地址"}},[a("Input",{attrs:{disabled:"",type:"text",name:"DBAddress"},model:{value:t.Config.DBAddress,callback:function(e){t.$set(t.Config,"DBAddress",e)},expression:"Config.DBAddress"}})],1),a("FormItem",{attrs:{label:"新数据库类型"}},[a("RadioGroup",{model:{value:t.MigrationFormData.DBType,callback:function(e){t.$set(t.MigrationFormData,"DBType",e)},expression:"MigrationFormData.DBType"}},[a("Radio",{attrs:{label:"SQLite"}},[t._v("SQLite")]),a("Radio",{attrs:{label:"MySQL"}},[t._v("MySQL")])],1)],1),a("FormItem",{attrs:{label:"新数据库地址",prop:"DBAddress"}},[a("Input",{attrs:{type:"text",name:"DBAddress"},model:{value:t.MigrationFormData.DBAddress,callback:function(e){t.$set(t.MigrationFormData,"DBAddress",e)},expression:"MigrationFormData.DBAddress"}})],1),a("FormItem",[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("MigrationFormData")}}},[t._v("保存")])],1)],1),a("Modal",{attrs:{title:"警告"},model:{value:t.Warning,callback:function(e){t.Warning=e},expression:"Warning"}},[a("p",{staticStyle:{color:"red","font-size":"18px"}},[t._v("\n      请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n    ")]),a("p",{staticStyle:{color:"red","font-size":"18px"}},[t._v("\n      请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n    ")]),a("p",{staticStyle:{color:"red","font-size":"18px"}},[t._v("\n      请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n    ")]),a("p",{staticStyle:{color:"red","font-size":"18px"}},[t._v("\n      请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n    ")]),a("p",{staticStyle:{color:"red","font-size":"18px"}},[t._v("\n      请不要轻易尝试使用该功能！！！！！！！！！！！！！！！\n    ")])])],1)},r=[],s=(a("7f7f"),a("90e7")),i=a("66df"),o=function(t){return i["a"].request({url:"/api/DataMigration",data:t,method:"post"})},l={data:function(){return{Warning:!0,MigrationFormData:{},Config:{DBAddress:"",DBType:""},UploadHeaders:{DBAddress:"",DBType:""},ruleInline:{DBAddress:[{required:!0,message:"新的数据库地址不能为空！",trigger:"blur"}]}}},methods:{getSystemConfig:function(){var t=this;Object(s["a"])().then((function(e){t.Config=JSON.parse(JSON.stringify(e)),t.MigrationFormData=JSON.parse(JSON.stringify(e))})).catch((function(t){console.log(t)}))},handleSubmit:function(t){var e=this,a=this;return this.$refs[t].validate((function(t){if(e.MigrationFormData.DBAddress==e.Config.DBAddress)return e.$Notice.error({title:"配置错误",desc:"新的数据库地址不能和原数据库地址一样！"}),!1;t&&e.$Modal.confirm({title:"迁移确认",content:"确定按此配置进行数据迁移吗？配置错误将迁移失败，迁移中可能出现部分数据丢失。",okText:"确定",cancelText:"取消",onOk:function(){o(a.MigrationFormData).then((function(t){a.$Modal.success({title:"迁移成功",content:t})})).catch((function(t){return a.$Notice.error({title:"配置错误",desc:t}),!1}))}})})),!1}},mounted:function(){this.getSystemConfig()}},d=l,c=(a("7ebd"),a("2877")),u=Object(c["a"])(d,n,r,!1,null,"12508085",null);e["default"]=u.exports},"7ebd":function(t,e,a){"use strict";a("bba2")},bba2:function(t,e,a){}}]);