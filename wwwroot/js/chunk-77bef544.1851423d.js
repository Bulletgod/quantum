(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77bef544"],{"25f8":function(t,e,n){"use strict";n.r(e);n("28a5");var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Split",{staticStyle:{height:"calc(100% - 30px)"},scopedSlots:t._u([{key:"left",fn:function(){return[e("Tree",{staticStyle:{height:"100%","overflow-y":"auto"},attrs:{data:t.treeDatas},on:{"on-select-change":t.treeNodeSelectChange}})]},proxy:!0},{key:"right",fn:function(){return[e("monaco-editor",{staticClass:"editor",attrs:{language:t.getLanguage,readOnly:!1,editorMounted:t.onEditorMounted},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})]},proxy:!0}]),model:{value:t.split,callback:function(e){t.split=e},expression:"split"}}),e("footer",[e("Button",{staticClass:"saveBtn",attrs:{disabled:!t.content,type:"error"},on:{click:t.deleteFile}},[t._v("删除文件")]),e("Button",{staticClass:"saveBtn",attrs:{disabled:!t.content,type:"primary"},on:{click:t.saveFile}},[t._v("保存")])],1)],1)},i=[],o=(n("a481"),n("b199")),c=n("2b77"),r={name:"quantum-scripts",data:function(){return{contextData:null,split:.18,treeDatas:[],content:"",SelectAllQL:!0,QLPanels:[],Files:[],Languages:{".py":"python",".js":"javascript",".json":"json",".sh":"shell",".ts":"typescript"},ModalEdit:!1,fileName:""}},model:{event:"save-success"},computed:{getLanguage:function(){if(this.fileName){var t=this.fileName.split(".");return this.Languages["."+t[t.length-1]]}return"javascript"}},components:{MonacoEditor:c["a"]},methods:{getScriptList:function(){var t=this;Object(o["i"])().then((function(e){t.treeDatas=e}))},getFile:function(){var t=this;Object(o["f"])({fileName:this.fileName}).then((function(e){t.content=e}))},deleteFile:function(){var t=this;this.$Modal.confirm({title:"脚本删除确认",content:"确认删除该脚本文件吗？",okText:"确定",cancelText:"取消",closable:!0,onOk:function(){Object(o["a"])(t.fileName).then((function(e){t.getScriptList(),t.content="",t.$Notice.success({desc:"删除脚本文件成功"})})).catch((function(t){}))}})},saveFile:function(){var t=this;this.$Modal.confirm({title:"脚本编辑确认",content:"确认保存修改的脚本内容？",okText:"确定",cancelText:"取消",closable:!0,onOk:function(){var e=t.content.replace(/[\r\n]+$/,"");Object(o["j"])({path:t.fileName,content:e}).then((function(e){t.$Notice.success({desc:"修改脚本文件成功"})})).catch((function(e){t.$Notice.error({title:"保存脚本文件失败",desc:e})}))}})},onEditorMounted:function(t,e){window.editor=t,window.monaco=e},treeNodeSelectChange:function(t,e){e.path&&(this.fileName=e.path,this.getFile())}},mounted:function(){this.getScriptList()}},s=r,u=(n("ea32"),n("2877")),l=Object(u["a"])(s,a,i,!1,null,"fd0ed67a",null);e["default"]=l.exports},b199:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"j",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"a",(function(){return p}));var a=n("66df"),i=function(t){return a["a"].request({url:"/api/Task",params:t,method:"get"})},o=function(t){return a["a"].request({url:"/api/Task",data:t,method:"post"})},c=function(t){return a["a"].request({url:"/api/Task",data:t,method:"delete"})},r=function(t){return a["a"].request({url:"/api/Task/Disable",data:t,method:"put"})},s=function(t){return a["a"].request({url:"/api/Task/Enable",data:t,method:"put"})},u=function(t){return a["a"].request({url:"/api/Task/Scripts",params:t,method:"get"})},l=function(t){return a["a"].request({url:"/api/Task/Scripts",data:t,method:"put"})},d=function(t){return a["a"].request({url:"/api/Task/ExecTask",data:t,method:"post"})},f=function(){return a["a"].request({url:"/api/Task/script-list",method:"get"})},p=function(t){return a["a"].request({url:"/api/Task/delete-scripts?fileName="+t,method:"delete"})}},c69c:function(t,e,n){},ea32:function(t,e,n){"use strict";n("c69c")}}]);